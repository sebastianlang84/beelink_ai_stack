name: qdrant
services:
  qdrant:
    container_name: qdrant
    image: qdrant/qdrant:v1.11.5
    restart: unless-stopped
    environment:
      # Optional: set QDRANT_API_KEY via `/etc/ai-stack/secrets.env` if you ever expose Qdrant beyond localhost.
      QDRANT__SERVICE__API_KEY: ${QDRANT_API_KEY:-}
    volumes:
      - qdrant-data:/qdrant/storage
    # Host access (localhost-only)
    ports:
      - "${QDRANT_BIND_ADDRESS:-127.0.0.1}:${QDRANT_HTTP_PORT:-6333}:6333"
    networks:
      - ai-stack

networks:
  ai-stack:
    external: true
    name: ai-stack

volumes:
  qdrant-data:
    external: true
    name: qdrant-data
